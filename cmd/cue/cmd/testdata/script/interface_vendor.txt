env GO111MODULE=on
# env GOFLAGS=-mod=readonly
# env GOPROXY=off GOSUMDB=off
cue get go example.com/custom
cmp cue.mod/gen/example.com/custom/custom_go_gen.cue get-go-output.golden

-- get-go-output.golden --
// Code generated by cue get go. DO NOT EDIT.

//cue:generate cue get go example.com/custom

package custom

// This is a type with custom JSON functions, so Cue should generate the def as top
#Custom: _
-- cue.mod/module.cue --
module: "example.com/repro"

-- go.mod --
module example.com/repro

-- vendor/example.com/custom/go.mod --
module example.com/custom

-- vendor/example.com/custom/custom.go --
package custom

// This is a type with custom JSON functions, so Cue should generate the def as top
type Custom struct {
    Value  string
    Number int
}

// UnmarshalJSON implements the json.Unmarshaller interface.
func (c *Custom) UnmarshalJSON(value []byte) error {
  return nil
}

// MarshalJSON implements the json.Marshaller interface.
func (c Custom) MarshalJSON() ([]byte, error) {
  return nil, nil
}
