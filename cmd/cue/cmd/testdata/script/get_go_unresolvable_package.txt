# Test that we get expected error when we ask cue get go to get
# a Go package that cannot be resolved.

[!go1.16] env GOFLAGS=-mod=readonly

! cue get go k8s.io/api/apps/v1
[go1.16] stderr '\Qno required module provides package k8s.io/api/apps/v1'
[go1.14] [!go1.16] stderr '\Qcannot find module providing package k8s.io/api/apps/v1: import lookup disabled by -mod=readonly'

-- go.mod --
module mod.com/blah

go 1.14
-- go.mod.golden --
module mod.com/blah

go 1.14
-- blah.go --
package main

import _ "embed"

// go:embed blah.txt
var blah string

// Syntax error
type S

type T struct {
	Age int
}

-- blah.cue.golden --
// Code generated by cue get go. DO NOT EDIT.

//cue:generate cue get go mod.com/blah

package main

#T: Age: int
