cue cmd http
cmp stdout cmd_http.out
-- cmd_http.out --
{"data":"I'll be back!","when":"now"}

-- task_tool.cue --

package home

command http: {
	task testserver: {
		kind: "testserver"
		url:  string
	}
	task http: {
		kind:   "http"
		method: "POST"
		url:    task.testserver.url

		request body:  "I'll be back!"
		response body: string // TODO: allow this to be a struct, parsing the body.
	}
	task print: {
		kind: "print"
		text: task.http.response.body
	}
}

-- base_tool.cue --

package home

// deliberately put in another file to test resolving top-level identifiers
// in different files.
runBase: {
	task echo: {
		kind:   "exec"
		stdout: string
	}

	task display: {
		kind: "print"
		text: task.echo.stdout
	}
}

-- task.cue --
package home

message: "Hello world!"
